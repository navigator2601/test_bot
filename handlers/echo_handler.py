# handlers/echo_handler.py

import logging
import random # <<-- ДОДАНО ІМПОРТ random
from aiogram import Router, types

logger = logging.getLogger(__name__)
router = Router()

# Список випадкових відповідей
RANDOM_RESPONSES = [
    "🧊 Refridex OS: Функцію не активовано. Очікується модульне оновлення.",
    "⚠️ Refridex OS: Команда отримана. Дії... не передбачені.",
    "📡 Refridex OS: Хм... Цей протокол ще не допаяний.",
    "🪛 Refridex OS: Вибач, ця функція зараз у режимі самороздумів.",
    "👁️ Refridex OS: Ти це натиснув серйозно? Ну добре... але ні.",
    "🔧 Refridex OS: Монтаж логіки в процесі. Повернись пізніше.",
    "📁 Refridex OS: Модуль знайдено. Зміст: “в розробці”.",
    "💤 Refridex OS: Цей сектор ще спить. Не буди, а то просить оновлення.",
    "🧠 Refridex OS: Генерую відповідь… Помилка: уява не встановлена.",
    "🤖 Refridex OS: Ваша дія записана. Нічого не сталося.",
    "🔄 Refridex OS: Обробка запиту... зависла у фреоновому просторі.",
    "⛔ Refridex OS: Цей командний пункт ще під захистом монтажної плівки.",
    "🛰️ Refridex OS: Сигнал від кнопки отримано. Але космос мовчить.",
    "📦 Refridex OS: Функція ще на складі. Очікує доставки з Компресограда.",
    "🕹️ Refridex OS: Технопроцес не завершено. Спробуй натиснути... наступного тижня.",
    "⚙️ Refridex OS: Цей функціонал поки лиш у кресленнях. І то — олівцем.",
    "🧯 Refridex OS: Не тисни сюди. Тут ще навіть фреон не підведено.",
    "📍 Refridex OS: Точка входу зафіксована. Виходу поки немає.",
    "🔍 Refridex OS: Сканую... Нічого корисного. Повернись пізніше.",
    "👾 Refridex OS: Тут мала бути функція, але її викрав баґ.",
    "📡 Refridex OS: Пробую зв’язатися з майбутнім… Вони ще не готові.",
    "💿 Refridex OS: Команда зчитана. Але диск ще не вставлений.",
    "🛸 Refridex OS: Техно-маг розробки пішов у відпустку.",
    "🚧 Refridex OS: Монтаж у процесі. Не забудь шолом.",
    "🔐 Refridex OS: Доступ обмежено. Код активації: \"терпіння\".",
    "🧊 Refridex OS: Функція заморожена. Розморозка після оновлення.",
    "💡 Refridex OS: Світло в тунелі є. Але ще не підключене.",
    "📈 Refridex OS: Розробка цієї функції пішла в “довгий монтаж”.",
    "🌌 Refridex OS: Команда вийшла за межі дозволеного Конди-ландом.",
    "🧪 Refridex OS: Прототип цієї функції ще проходить тести на витік.",
    "🧬 Refridex OS: *404: Логіка не знайдена. Але виглядає круто.*",
    "🌀 Refridex OS: Спроба активувати заборонену зону. Повернення у реальність...",
    "🧘 Refridex OS: Ця функція медитує. Не турбувати.",
    "🔄 Refridex OS: Створюю ілюзію роботи... Готово.",
    "🎛️ Refridex OS: Кнопка активна. Але не для тебе... ще.",
]

@router.message()
async def echo_all_messages(message: types.Message):
    user_id = message.from_user.id
    user_name = message.from_user.full_name
    logger.info(f"Отримано некомандне повідомлення від {user_name} (ID: {user_id}): {message.text}")
    
    # Вибираємо випадкову відповідь зі списку
    response_text = random.choice(RANDOM_RESPONSES)
    
    try:
        await message.answer(response_text) # <<-- ЗМІНА ТУТ: відправляємо випадкову відповідь
    except Exception as e: # Змінено TypeЕrror на загальний Exception, якщо будуть інші проблеми
        logger.error(f"Помилка при відправці випадкової відповіді користувачу {user_id}: {e}", exc_info=True)
        await message.answer("Виникла помилка при обробці вашого запиту.")